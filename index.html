<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<title>Ushio短链生成器</title>
	<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
	<link rel="stylesheet" type="text/css" href="css/index.css"/>
	<link rel="stylesheet" type="text/css" href="css/layer.css"/>
	<link rel="stylesheet" type="text/css" href="css/jquery.css"/>
	<script type="text/javascript">block_aplayer = true;</script>
	<script src="https://cdn.yimian.xyz/ushio-js/ushio-head.min.js"></script>
</head>
<body>

	<div class="main_div">
		<br><br><br><br><br><br><br><br>
		<div class="bottom_div">
			<div class="bottom_text">
				请输入需要缩短的链接：
			</div>
			<div class="car_input">
				<input type="text" name="url" id="url" placeholder="输入链接" />
			</div>
			<div class="next_step">
				生成
			</div>
			<div class="car_input">
				<input type="text" id="res"/>
			</div>
		</div>
	</div>
	

<script type="text/javascript" src="js/jquery.min.js"></script>

<script type="text/javascript">


function getURL(url, fun) {
    var strReg = /http(s)?:\/\/([\w-]+\.)+[\w-]+(\/[\w- .\/?%&=]*)?/;
    var re = new RegExp(strReg);
    if(!re.test(url)) {
        fun(false);
    } else {
        fun(true);
    }
}

$('#res').hide();

	$('.next_step').click(function(){
		getURL($('#url').val(), function(flag){
			if(flag){
				$.get('https://shorturl.yimian.xyz/api.php?url='+window.btoa($('#url').val()), function(res){
					res = JSON.parse(res);
					$('#res').show();
					$('#res').val(res.key);

				})
			}else{
				alert('请输入有效的链接！！')
			}
		})
		
	})

</script>
<script src="https://cdn.yimian.xyz/ushio-js/ushio-footer.min.js"></script>
</body>	
</html>